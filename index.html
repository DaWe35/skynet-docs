
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Skynet Docs</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .nl {
  color: #f92672;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen-744f7dea.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print-4910022a.css" rel="stylesheet" media="print" />
      <script src="javascripts/all-c5541673.js"></script>
  </head>

  <body class="index" data-languages="[&quot;shell--curl&quot;,&quot;shell--cli&quot;,&quot;javascript--browser&quot;,&quot;javascript--node&quot;,&quot;python&quot;,&quot;go&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar-cad8cdcb.png" alt="" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo-42407883.png" class="logo" alt="" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell--curl">curl</a>
              <a href="#" data-language-name="shell--cli">CLI</a>
              <a href="#" data-language-name="javascript--browser">Browser JS</a>
              <a href="#" data-language-name="javascript--node">NodeJS</a>
              <a href="#" data-language-name="python">Python</a>
              <a href="#" data-language-name="go">Go</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#a-note-about-language-differences" class="toc-h2 toc-link" data-title="A Note About Language Differences">A Note About Language Differences</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#getting-started" class="toc-h1 toc-link" data-title="Getting Started">Getting Started</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#making-your-first-api-call" class="toc-h2 toc-link" data-title="Making Your First API Call">Making Your First API Call</a>
                  </li>
                  <li>
                    <a href="#using-a-different-portal" class="toc-h2 toc-link" data-title="Using A Different Portal">Using A Different Portal</a>
                  </li>
                  <li>
                    <a href="#setting-additional-options" class="toc-h2 toc-link" data-title="Setting Additional Options">Setting Additional Options</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#api-authentication" class="toc-h1 toc-link" data-title="API Authentication">API Authentication</a>
          </li>
          <li>
            <a href="#uploading-to-skynet" class="toc-h1 toc-link" data-title="Uploading To Skynet">Uploading To Skynet</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#uploading-a-file" class="toc-h2 toc-link" data-title="Uploading A File">Uploading A File</a>
                  </li>
                  <li>
                    <a href="#uploading-a-directory" class="toc-h2 toc-link" data-title="Uploading A Directory">Uploading A Directory</a>
                  </li>
                  <li>
                    <a href="#uploading-with-encryption" class="toc-h2 toc-link" data-title="Uploading With Encryption">Uploading With Encryption</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#downloading-from-skynet" class="toc-h1 toc-link" data-title="Downloading From Skynet">Downloading From Skynet</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#downloading-a-file" class="toc-h2 toc-link" data-title="Downloading A File">Downloading A File</a>
                  </li>
                  <li>
                    <a href="#getting-metadata" class="toc-h2 toc-link" data-title="Getting Metadata">Getting Metadata</a>
                  </li>
                  <li>
                    <a href="#downloading-with-decryption" class="toc-h2 toc-link" data-title="Downloading With Decryption">Downloading With Decryption</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#encryption" class="toc-h1 toc-link" data-title="Encryption">Encryption</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#creating-a-skykey" class="toc-h2 toc-link" data-title="Creating A Skykey">Creating A Skykey</a>
                  </li>
                  <li>
                    <a href="#addding-a-skykey" class="toc-h2 toc-link" data-title="Addding A Skykey">Addding A Skykey</a>
                  </li>
                  <li>
                    <a href="#getting-a-skykey-by-name" class="toc-h2 toc-link" data-title="Getting A Skykey By Name">Getting A Skykey By Name</a>
                  </li>
                  <li>
                    <a href="#listing-skykeys" class="toc-h2 toc-link" data-title="Listing Skykeys">Listing Skykeys</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#blacklist" class="toc-h1 toc-link" data-title="Blacklist">Blacklist</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-blacklist" class="toc-h2 toc-link" data-title="Get Blacklist">Get Blacklist</a>
                  </li>
                  <li>
                    <a href="#edit-blacklist" class="toc-h2 toc-link" data-title="Edit Blacklist">Edit Blacklist</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#portals" class="toc-h1 toc-link" data-title="Portals">Portals</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-portals" class="toc-h2 toc-link" data-title="Get Portals">Get Portals</a>
                  </li>
                  <li>
                    <a href="#edit-portals" class="toc-h2 toc-link" data-title="Edit Portals">Edit Portals</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#statistics" class="toc-h1 toc-link" data-title="Statistics">Statistics</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-stats" class="toc-h2 toc-link" data-title="Get Stats">Get Stats</a>
                  </li>
              </ul>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='https://siasky.net/'>Check out Skynet</a></li>
            <li><a href='https://github.com/NebulousLabs/skynet-docs'>Contribute to the docs</a></li>
            <li>---</li>
            <li><a href='https://github.com/slatedocs/slate'>Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>Welcome to the Skynet SDK docs!</p>

<p>We have SDK support for several languages:</p>

<ul>
<li>Shell (using curl)</li>
<li><a href="https://github.com/NebulousLabs/skynet-js">Browser JS</a></li>
<li><a href="https://github.com/NebulousLabs/nodejs-skynet">NodeJS</a></li>
<li><a href="https://github.com/NebulousLabs/python-skynet">Python</a></li>
<li><a href="https://github.com/NebulousLabs/go-skynet">Go</a></li>
</ul>

<p>as well as the <a href="https://github.com/NebulousLabs/skynet-cli">Skynet CLI</a> (written in Go).</p>

<p>These SDKs are wrappers around HTTP calls to the corresponding Skynet endpoints. Full documentation for the HTTP API can be found in the <a href="https://sia.tech/docs/#skynet">Sia API Documentation</a>.</p>

<aside class="success">
You can view code examples in the dark area to the right. Switch to the
programming language of your choice by clicking the tabs in the top right.
</aside>
<h2 id='a-note-about-language-differences'>A Note About Language Differences</h2>
<p>Though we tried to keep the SDKs as similar to each other as possible, differences between the languages -- the idiosyncracies and best practices of each -- resulted in differences between the SDKs. We&#39;ve noted them where necessary.</p>
<h3 id='case'>Case</h3>
<p>In particular, note that the casing of functions and their parameters differs between the languages:</p>

<ul>
<li>Javascript: <a href="https://en.wikipedia.org/wiki/Camel_case"><code>camelCase</code></a></li>
<li>Python: <a href="https://en.wikipedia.org/wiki/Snake_case"><code>snake_case</code></a></li>
<li>Go: <a href="https://en.wikipedia.org/wiki/PascalCase"><code>PascalCase</code></a></li>
</ul>

<p>For consistency throughout this document, functions and their parameters are documented using camelCase.</p>
<h3 id='standard-responses'>Standard Responses</h3>
<p>Functions will respond with the desired content on success and with errors or exceptions on failure. The error messages may contain HTTP status codes (see <a href="https://sia.tech/docs/#standard-responses">Standard Responses</a>).</p>

<p>Functions will fail differently in each SDK depending on the language:</p>

<ul>
<li>Javascript: exceptions are raised and must be caught with a <code>try-catch</code> block.</li>
<li>Python: same as above.</li>
<li>Go: errors are returned and must be checked for explicitly.</li>
</ul>
<h1 id='getting-started'>Getting Started</h1><h2 id='making-your-first-api-call'>Making Your First API Call</h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nt">-X</span> POST <span class="s2">"https://siasky.net/skynet/skyfile"</span> <span class="nt">-F</span> <span class="nv">file</span><span class="o">=</span>@image.jpg
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>skynet upload <span class="s2">"./image.jpg"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">upload</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">skynet-js</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// Assume we have a file from an input form.</span>

<span class="k">try</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">{</span> <span class="nx">skylink</span> <span class="p">}</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">upload</span><span class="p">(</span><span class="dl">"</span><span class="s2">https://siasky.net</span><span class="dl">"</span><span class="p">,</span> <span class="nx">file</span><span class="p">);</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">skynet</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">@nebulous/skynet</span><span class="dl">'</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">skylink</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">skynet</span><span class="p">.</span><span class="nx">UploadFile</span><span class="p">(</span>
        <span class="dl">"</span><span class="s2">./image.jpg</span><span class="dl">"</span>
    <span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`Upload successful, skylink: </span><span class="p">${</span><span class="nx">skylink</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">siaskynet</span> <span class="k">as</span> <span class="n">skynet</span>

<span class="n">skylink</span> <span class="o">=</span> <span class="n">skynet</span><span class="o">.</span><span class="n">upload_file</span><span class="p">(</span><span class="s">"image.jpg"</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Upload successful, skylink: "</span> <span class="o">+</span> <span class="n">skylink</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="n">skynet</span> <span class="s">"github.com/NebulousLabs/go-skynet"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">skylink</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">skynet</span><span class="o">.</span><span class="n">UploadFile</span><span class="p">(</span><span class="s">"./image.jpg"</span><span class="p">,</span> <span class="n">skynet</span><span class="o">.</span><span class="n">DefaultUploadOptions</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="nb">panic</span><span class="p">(</span><span class="s">"Unable to upload: "</span> <span class="o">+</span> <span class="n">err</span><span class="o">.</span><span class="n">Error</span><span class="p">())</span>
    <span class="p">}</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="s">"Upload successful, skylink: %v</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">skylink</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<p>The SDKs are set up to be as simple as possible. Despite the many options for configuration, most users will be able to get started with a single API call. In the example on the right, we upload the file <code>image.jpg</code> to the default Skynet portal, <code>https://siasky.net</code>.</p>
<h2 id='using-a-different-portal'>Using A Different Portal</h2>
<p>The default portal used is <code>https://siasky.net</code> (also available through the exported constant, <code>defaultPortalUrl</code>) and no configuration is required to use it. Having a reasonable choice already selected keeps friction for new developers low. However, as Skynet is a decentralized project, it is also possible to use different portals.</p>

<p>In most SDKs, a different portal can be passed in as part of the options for each function.</p>
<h3 id='browser-js'>Browser JS</h3><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="k">import</span> <span class="nx">SkynetClient</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">skynet-js</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// Or SkynetClient() without arguments to use the default portal.</span>
<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SkynetClient</span><span class="p">(</span><span class="dl">"</span><span class="s2">https://some-other-portal.xyz</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// Assume we have a file from an input form.</span>

<span class="k">try</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">{</span> <span class="nx">skylink</span> <span class="p">}</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">upload</span><span class="p">(</span><span class="nx">file</span><span class="p">);</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<p>In Browser JS it is possible to either:</p>

<ul>
<li>Use the standalone functions and pass in a different portal as the first argument.</li>
<li>Create a new client with the desired portal. Clients implement all the standalone functions as methods with bound <code>portalUrl</code> so you don&#39;t need to repeat it every time. See the code example on the right.</li>
</ul>
<h2 id='setting-additional-options'>Setting Additional Options</h2>
<p>Each SDK function also accepts additional options. These vary depending on the endpoint and are documented alongside each function.</p>

<aside class="notice">
In most of our SDKs the additional options may be left out of the function calls, in which case the default options are used. In <b>Go</b> the options must always be passed in, as the language does not support optional function parameters.
</aside>
<h3 id='common-options'>Common Options</h3>
<p>Every function accepts the following common options:</p>

<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td><code>portal</code></td>
<td>The URL of the portal.</td>
<td><code>&quot;https://siasky.net&quot;</code></td>
</tr>
<tr>
<td><code>endpointPath</code></td>
<td>The relative path on the portal where the endpoint may be found for the function being called. Some portals, for example, may offer alternate download paths.</td>
<td><code>&quot;&quot;</code></td>
</tr>
<tr>
<td><code>customUserAgent</code></td>
<td>This option is available to change the User Agent, as some portals may reject user agents that are not <code>Sia-Agent</code> for security reasons.</td>
<td><code>&quot;&quot;</code></td>
</tr>
</tbody></table>
<h1 id='api-authentication'>API Authentication</h1>
<p>Portals will likely require authentication on several of their endpoints. This is to prevent unwanted modifications to the blacklist, portal list, etc.</p>

<p>If you are authorized to use password-protected endpoints on a portal, you may authenticate yourself by setting the <code>APIKey</code> custom option when calling a function.</p>

<p>For more information about authentication on portals please see <a href="https://sia.tech/docs/#authentication">the Sia Docs</a>.</p>
<h1 id='uploading-to-skynet'>Uploading To Skynet</h1><h2 id='uploading-a-file'>Uploading A File</h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nt">-X</span> POST <span class="s2">"https://siasky.net/skynet/skyfile"</span> <span class="nt">-F</span> <span class="nv">file</span><span class="o">=</span>@image.jpg
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>skynet upload <span class="s2">"./image.jpg"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">upload</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">skynet-js</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// NOTE: This example is different from the other SDKs because we cannot just take a path to a local file.</span>

<span class="c1">// Assume we have a file from an input form.</span>

<span class="k">try</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">{</span> <span class="nx">skylink</span> <span class="p">}</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">upload</span><span class="p">(</span><span class="dl">"</span><span class="s2">https://siasky.net</span><span class="dl">"</span><span class="p">,</span> <span class="nx">file</span><span class="p">);</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">skynet</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">@nebulous/skynet</span><span class="dl">'</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">skylink</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">skynet</span><span class="p">.</span><span class="nx">UploadFile</span><span class="p">(</span>
        <span class="dl">"</span><span class="s2">./image.jpg</span><span class="dl">"</span><span class="p">,</span>
        <span class="nx">skynet</span><span class="p">.</span><span class="nx">DefaultUploadOptions</span>
    <span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`Upload successful, skylink: </span><span class="p">${</span><span class="nx">skylink</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">siaskynet</span> <span class="k">as</span> <span class="n">skynet</span>

<span class="n">skylink</span> <span class="o">=</span> <span class="n">skynet</span><span class="o">.</span><span class="n">upload_file</span><span class="p">(</span><span class="s">"image.jpg"</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Upload successful, skylink: "</span> <span class="o">+</span> <span class="n">skylink</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="n">skynet</span> <span class="s">"github.com/NebulousLabs/go-skynet"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">skylink</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">skynet</span><span class="o">.</span><span class="n">UploadFile</span><span class="p">(</span><span class="s">"./image.jpg"</span><span class="p">,</span> <span class="n">skynet</span><span class="o">.</span><span class="n">DefaultUploadOptions</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="nb">panic</span><span class="p">(</span><span class="s">"Unable to upload: "</span> <span class="o">+</span> <span class="n">err</span><span class="o">.</span><span class="n">Error</span><span class="p">())</span>
    <span class="p">}</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="s">"Upload successful, skylink: %v</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">skylink</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<p>Uploading a file to Skynet can be done through a Skynet portal or your
local <code>siad</code> instance.</p>

<aside class="notice">
If a file is uploaded through a portal, the portal owner is paying to host that file, and it will remain on the network for as long as that file contract is valid.
</aside>
<h3 id='parameters'>Parameters</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>path</code></td>
<td>The local path where the file to upload may be found.</td>
</tr>
</tbody></table>

<p><em>Browser JS:</em></p>

<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>file</code></td>
<td>The <code>File</code> object returned from an input form.</td>
</tr>
</tbody></table>
<h3 id='additional-options'>Additional Options</h3>
<p>Eventually, all SDKs will support the following options:</p>

<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td><code>endpointPath</code></td>
<td>The relative URL path of the portal endpoint to contact.</td>
<td><code>&quot;/skynet/skyfile&quot;</code></td>
</tr>
<tr>
<td><code>portalFileFieldName</code></td>
<td>The field name for files on the portal. Usually should not need to be changed.</td>
<td><code>&quot;file&quot;</code></td>
</tr>
<tr>
<td><code>portalDirectoryFileFieldName</code></td>
<td>The field name for directories on the portal. Usually should not need to be changed.</td>
<td><code>&quot;files[]&quot;</code></td>
</tr>
<tr>
<td><code>customFilename</code></td>
<td>Custom filename. This is the filename that will be returned when downloading the file in a browser.</td>
<td><code>&quot;&quot;</code></td>
</tr>
<tr>
<td><code>customDirname</code></td>
<td>Custom dirname. If this is empty, the base name of the directory being uploaded will be used by default.</td>
<td><code>&quot;&quot;</code></td>
</tr>
<tr>
<td><code>skykeyName</code></td>
<td>The name of the skykey on the portal used to encrypt the upload.</td>
<td><code>&quot;&quot;</code></td>
</tr>
<tr>
<td><code>skykeyID</code></td>
<td>The ID of the skykey on the portal used to encrypt the upload.</td>
<td><code>&quot;&quot;</code></td>
</tr>
<tr>
<td><code>timeout_seconds</code></td>
<td>The timeout in seconds.</td>
<td><code>&quot;&quot;</code></td>
</tr>
</tbody></table>
<h3 id='response'>Response</h3><div class="highlight"><pre class="highlight shell tab-shell--curl"><code><span class="o">{</span>
  <span class="s2">"skylink"</span>: <span class="s2">"CABAB_1Dt0FJsxqsu_J4TodNCbCGvtFf1Uys_3EgzOlTcg"</span>,
  <span class="s2">"merkleroot"</span>: <span class="s2">"QAf9Q7dBSbMarLvyeE6HTQmwhr7RX9VMrP9xIMzpU3I"</span>,
  <span class="s2">"bitfield"</span>: 2048
<span class="o">}</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>Successfully uploaded file! Skylink: CABAB_1Dt0FJsxqsu_J4TodNCbCGvtFf1Uys_3EgzOlTcg
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="c1">// skylink = "CABAB_1Dt0FJsxqsu_J4TodNCbCGvtFf1Uys_3EgzOlTcg"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="c1">// skylink = "CABAB_1Dt0FJsxqsu_J4TodNCbCGvtFf1Uys_3EgzOlTcg"</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="c1"># skylink = "CABAB_1Dt0FJsxqsu_J4TodNCbCGvtFf1Uys_3EgzOlTcg"
</span></code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="c">// skylink = "CABAB_1Dt0FJsxqsu_J4TodNCbCGvtFf1Uys_3EgzOlTcg"</span>
</code></pre></div>
<p>The response will contain some or all of these fields:</p>

<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>skylink</code></td>
<td>This is the skylink that can be used when downloading to retrieve the file that has been uploaded. It is a 46-character base64 encoded string that consists of the merkle root, offset, fetch size, and Skylink version which can be used to access the content.</td>
</tr>
<tr>
<td><code>merkleroot</code></td>
<td>This is the hash that is encoded into the skylink.</td>
</tr>
<tr>
<td><code>bitfield</code></td>
<td>This is the bitfield that gets encoded into the skylink. The bitfield contains a version, an offset and a length in a heavily compressed and optimized format.</td>
</tr>
</tbody></table>
<h2 id='uploading-a-directory'>Uploading A Directory</h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="s2">"https://siasky.net/skynet/skyfile"</span> <span class="nt">-F</span> files[]<span class="o">=</span>@./images/image1.png <span class="nt">-F</span> files[]<span class="o">=</span>@./images/image2.png
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>skynet upload <span class="s2">"source dir path"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">getRelativeFilePath</span><span class="p">,</span> <span class="nx">getRootDirectory</span><span class="p">,</span> <span class="nx">uploadDirectory</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">skynet-js</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// NOTE: This example is different from the other SDKs because we cannot just take a path to a local directory.</span>

<span class="c1">// Assume we have a list of files from an input form.</span>
<span class="kd">const</span> <span class="nx">filename</span> <span class="o">=</span> <span class="nx">getRootDirectory</span><span class="p">(</span><span class="nx">files</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
<span class="kd">const</span> <span class="nx">directory</span> <span class="o">=</span> <span class="nx">files</span><span class="p">.</span><span class="nx">reduce</span><span class="p">((</span><span class="nx">acc</span><span class="p">,</span> <span class="nx">file</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">getRelativeFilePath</span><span class="p">(</span><span class="nx">file</span><span class="p">);</span>

  <span class="k">return</span> <span class="p">{</span> <span class="p">...</span><span class="nx">acc</span><span class="p">,</span> <span class="p">[</span><span class="nx">path</span><span class="p">]:</span> <span class="nx">file</span> <span class="p">};</span>
<span class="p">},</span> <span class="p">{});</span>

<span class="k">try</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">directory</span> <span class="o">=</span> <span class="nx">files</span><span class="p">.</span><span class="nx">reduce</span><span class="p">((</span><span class="nx">acc</span><span class="p">,</span> <span class="nx">file</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">getRelativeFilePath</span><span class="p">(</span><span class="nx">file</span><span class="p">);</span>

    <span class="k">return</span> <span class="p">{</span> <span class="p">...</span><span class="nx">acc</span><span class="p">,</span> <span class="p">[</span><span class="nx">path</span><span class="p">]:</span> <span class="nx">file</span> <span class="p">};</span>
  <span class="p">},</span> <span class="p">{});</span>

  <span class="kd">const</span> <span class="p">{</span> <span class="nx">skylink</span> <span class="p">}</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">uploadDirectory</span><span class="p">(</span><span class="nx">portalUrl</span><span class="p">,</span> <span class="nx">directory</span><span class="p">,</span> <span class="nx">filename</span><span class="p">);</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">skynet</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">@nebulous/skynet</span><span class="dl">'</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">url</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">skynet</span><span class="p">.</span><span class="nx">UploadDirectory</span><span class="p">(</span>
        <span class="dl">"</span><span class="s2">./images</span><span class="dl">"</span><span class="p">,</span>
        <span class="nx">skynet</span><span class="p">.</span><span class="nx">DefaultUploadOptions</span>
    <span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`Upload successful, url: </span><span class="p">${</span><span class="nx">url</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">siaskynet</span> <span class="k">as</span> <span class="n">skynet</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">skynet</span><span class="o">.</span><span class="n">upload_directory</span><span class="p">(</span><span class="s">"./images"</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Upload successful, url: "</span> <span class="o">+</span> <span class="n">url</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="n">skynet</span> <span class="s">"github.com/NebulousLabs/go-skynet"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">url</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">skynet</span><span class="o">.</span><span class="n">UploadDirectory</span><span class="p">(</span><span class="s">"./images"</span><span class="p">,</span> <span class="n">skynet</span><span class="o">.</span><span class="n">DefaultUploadOptions</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="nb">panic</span><span class="p">(</span><span class="s">"Unable to upload: "</span> <span class="o">+</span> <span class="n">err</span><span class="o">.</span><span class="n">Error</span><span class="p">())</span>
    <span class="p">}</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="s">"Upload successful, url: %v</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">url</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<p>It is possible to upload a directory as a single piece of content. Doing this
will allow you to address your content under one skylink, and access the files
by their path. This is especially useful for webapps.</p>

<p>Directory uploads work using multipart form upload.</p>
<h3 id='parameters-2'>Parameters</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>path</code></td>
<td>The local path where the directory to upload may be found.</td>
</tr>
</tbody></table>

<p><em>Browser JS:</em></p>

<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>directory</code></td>
<td>Object containing <code>File</code>s from an input form to upload, indexed by their path strings.</td>
</tr>
<tr>
<td><code>filename</code></td>
<td>The name of the directory.</td>
</tr>
</tbody></table>
<h3 id='additional-options-2'>Additional Options</h3>
<p>See <a href=".#uploading-a-file">Uploading A File</a>.</p>
<h3 id='response-2'>Response</h3><div class="highlight"><pre class="highlight shell tab-shell--curl"><code><span class="o">{</span>
  <span class="s2">"skylink"</span>: <span class="s2">"CABAB_1Dt0FJsxqsu_J4TodNCbCGvtFf1Uys_3EgzOlTcg"</span>,
  <span class="s2">"merkleroot"</span>: <span class="s2">"QAf9Q7dBSbMarLvyeE6HTQmwhr7RX9VMrP9xIMzpU3I"</span>,
  <span class="s2">"bitfield"</span>: 2048
<span class="o">}</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>Successfully uploaded directory! Skylink: sia://EAAV-eT8wBIF1EPgT6WQkWWsb3mYyEO1xz9iFueK5zCtqg
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="c1">// url = sia://EAAV-eT8wBIF1EPgT6WQkWWsb3mYyEO1xz9iFueK5zCtqg</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="c1">// url = sia://EAAV-eT8wBIF1EPgT6WQkWWsb3mYyEO1xz9iFueK5zCtqg</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="c1"># url = sia://EAAV-eT8wBIF1EPgT6WQkWWsb3mYyEO1xz9iFueK5zCtqg
</span></code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="c">// url = sia://EAAV-eT8wBIF1EPgT6WQkWWsb3mYyEO1xz9iFueK5zCtqg</span>
</code></pre></div>
<p>See <a href=".#uploading-a-file">Uploading A File</a>.</p>
<h2 id='uploading-with-encryption'>Uploading With Encryption</h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>TODO
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>TODO
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">upload</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">skynet-js</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// Assume we have a file from an input form.</span>

<span class="k">try</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">{</span> <span class="nx">skylink</span> <span class="p">}</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">upload</span><span class="p">(</span><span class="dl">"</span><span class="s2">https://siasky.net</span><span class="dl">"</span><span class="p">,</span> <span class="nx">file</span><span class="p">,</span> <span class="p">{</span> <span class="na">skykeyName</span><span class="p">:</span> <span class="dl">"</span><span class="s2">my-skykey</span><span class="dl">"</span> <span class="p">});</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="nx">TODO</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="n">TODO</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="n">skynet</span> <span class="s">"github.com/NebulousLabs/go-skynet"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">opts</span> <span class="o">:=</span> <span class="n">skynet</span><span class="o">.</span><span class="n">DefaultUploadOptions</span>
    <span class="n">opts</span><span class="o">.</span><span class="n">SkykeyName</span> <span class="o">=</span> <span class="s">"my-skykey"</span>
    <span class="n">skylink</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">skynet</span><span class="o">.</span><span class="n">UploadFile</span><span class="p">(</span><span class="s">"./image.jpg"</span><span class="p">,</span> <span class="n">opts</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="nb">panic</span><span class="p">(</span><span class="s">"Unable to upload: "</span> <span class="o">+</span> <span class="n">err</span><span class="o">.</span><span class="n">Error</span><span class="p">())</span>
    <span class="p">}</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="s">"Upload successful, skylink: %v</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">skylink</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<p>If you have a skykey on the portal you can ask the portal to encrypt the uploaded content for you. Simply pass the skykey name or ID in the custom options when uploading a file or directory.</p>

<p>See the additional options in <a href=".#uploading-a-file">Uploading A File</a>.</p>

<p>Also see <a href=".#encryption">Encryption</a>.</p>
<h1 id='downloading-from-skynet'>Downloading From Skynet</h1><h2 id='downloading-a-file'>Downloading A File</h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code><span class="c"># entire file</span>
curl <span class="nt">-A</span> <span class="s2">"Sia-Agent"</span> <span class="s2">"localhost:9980/skynet/skylink/CABAB_1Dt0FJsxqsu_J4TodNCbCGvtFf1Uys_3EgzOlTcg"</span>

<span class="c"># directory</span>
curl <span class="nt">-A</span> <span class="s2">"Sia-Agent"</span> <span class="s2">"localhost:9980/skynet/skylink/CABAB_1Dt0FJsxqsu_J4TodNCbCGvtFf1Uys_3EgzOlTcg/folder"</span>

<span class="c"># sub file</span>
curl <span class="nt">-A</span> <span class="s2">"Sia-Agent"</span> <span class="s2">"localhost:9980/skynet/skylink/CABAB_1Dt0FJsxqsu_J4TodNCbCGvtFf1Uys_3EgzOlTcg/folder/file.txt"</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>skynet download <span class="o">[</span>skylink] <span class="o">[</span>destination]
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">download</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">skynet-js</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// Assume we have a skylink e.g. from a previous upload.</span>

<span class="k">try</span> <span class="p">{</span>
  <span class="nx">download</span><span class="p">(</span><span class="nx">portalUrl</span><span class="p">,</span> <span class="nx">skylink</span><span class="p">);</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">skynet</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">@nebulous/skynet</span><span class="dl">'</span><span class="p">);</span>

<span class="c1">// Must have a 'skylink' from an earlier upload.</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">await</span> <span class="nx">skynet</span><span class="p">.</span><span class="nx">DownloadFile</span><span class="p">(</span>
        <span class="dl">"</span><span class="s2">./dst.jpg</span><span class="dl">"</span><span class="p">,</span>
        <span class="nx">skylink</span>
    <span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Download successful</span><span class="dl">'</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">siaskynet</span> <span class="k">as</span> <span class="n">skynet</span>

<span class="c1"># Must have a 'skylink' from an earlier upload.
</span>
<span class="n">skynet</span><span class="o">.</span><span class="n">download_file</span><span class="p">(</span><span class="s">"./dst.jpg"</span><span class="p">,</span> <span class="n">skylink</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Download successful"</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="n">skynet</span> <span class="s">"github.com/NebulousLabs/go-skynet"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c">// Must have a 'skylink' from an earlier upload.</span>

    <span class="n">err</span> <span class="o">=</span> <span class="n">skynet</span><span class="o">.</span><span class="n">DownloadFile</span><span class="p">(</span><span class="s">"./dst.go"</span><span class="p">,</span> <span class="n">skylink</span><span class="p">,</span> <span class="n">skynet</span><span class="o">.</span><span class="n">DefaultDownloadOptions</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="nb">panic</span><span class="p">(</span><span class="s">"Something went wrong, please try again.</span><span class="se">\n</span><span class="s">Error: "</span> <span class="o">+</span> <span class="n">err</span><span class="o">.</span><span class="n">Error</span><span class="p">())</span>
    <span class="p">}</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Download successful"</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<p>This endpoint downloads a skylink using http streaming. The call blocks until
the data is received. There is a 30s default timeout applied to downloading a
skylink. If the data can not be found within this 30s time constraint, a <code>404</code>
error will be returned. This timeout is configurable.</p>
<h3 id='parameters'>Parameters</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>path</code></td>
<td>The local path where the file should be downloaded to.</td>
</tr>
<tr>
<td><code>skylink</code></td>
<td>The skylink that should be downloaded. The skylink can contain an optional path. This path can specify a directory or a particular file. If specified, only that file or directory will be returned.</td>
</tr>
</tbody></table>

<p><em>Browser JS:</em></p>

<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>skylink</code></td>
<td>The skylink that should be downloaded. The skylink can contain an optional path. This path can specify a directory or a particular file. If specified, only that file or directory will be returned.</td>
</tr>
</tbody></table>
<h3 id='additional-options'>Additional Options</h3>
<p>Eventually, all SDKs will support the following options:</p>

<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td><code>endpointPath</code></td>
<td>The relative URL path of the portal endpoint to contact.</td>
<td><code>&quot;/&quot;</code></td>
</tr>
<tr>
<td><code>skykeyName</code></td>
<td>The name of the skykey on the portal used to decrypt the download.</td>
<td><code>&quot;&quot;</code></td>
</tr>
<tr>
<td><code>skykeyID</code></td>
<td>The ID of the skykey on the portal used to decrypt the download.</td>
<td><code>&quot;&quot;</code></td>
</tr>
<tr>
<td><code>timeout_seconds</code></td>
<td>The timeout in seconds.</td>
<td><code>&quot;&quot;</code></td>
</tr>
</tbody></table>
<h3 id='response'>Response</h3>
<p><em>Browser JS:</em></p>

<p>Exception on failure.</p>
<h2 id='getting-metadata'>Getting Metadata</h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nt">-I</span> <span class="nt">-A</span> <span class="s2">"Sia-Agent"</span> <span class="s2">"localhost:9980/skynet/skylink/CABAB_1Dt0FJsxqsu_J4TodNCbCGvtFf1Uys_3EgzOlTcg"</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>TODO
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">metadata</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">skynet-js</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// Assume we have a skylink e.g. from a previous upload.</span>

<span class="k">try</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">md</span> <span class="o">=</span> <span class="nx">metadata</span><span class="p">(</span><span class="nx">portalUrl</span><span class="p">,</span> <span class="nx">skylink</span><span class="p">);</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="nx">TODO</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="n">TODO</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="n">TODO</span>
</code></pre></div>
<p>It is possible to get metadata about a file or directory without fetching
the entire content. These API calls will perform a HEAD request that fetches the
headers for the given skylink. These headers are identical to the ones that
would be returned if the request had been a GET request.</p>
<h3 id='parameters-2'>Parameters</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>skylink</code></td>
<td>The skylink that should be downloaded. The skylink can contain an optional path. This path can specify a directory or a particular file. If specified, only that file or directory will be returned.</td>
</tr>
</tbody></table>
<h3 id='additional-options-2'>Additional Options</h3>
<p>See <a href=".#downloading-a-file">Downloading A File</a>.</p>
<h3 id='response-2'>Response</h3><div class="highlight"><pre class="highlight shell tab-shell--curl"><code><span class="o">{</span>
<span class="s2">"mode"</span>:     640,
<span class="s2">"filename"</span>: <span class="s2">"folder"</span>,
<span class="s2">"subfiles"</span>: <span class="o">[</span>
  <span class="o">{</span>
  <span class="s2">"mode"</span>:         640,
  <span class="s2">"filename"</span>:     <span class="s2">"folder/file1.txt"</span>,
  <span class="s2">"contenttype"</span>:  <span class="s2">"text/plain"</span>,
  <span class="s2">"offset"</span>:       0,
  <span class="s2">"len"</span>:          6
  <span class="o">}</span>
<span class="o">]</span>
<span class="o">}</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code><span class="o">{</span>
<span class="s2">"mode"</span>:     640,
<span class="s2">"filename"</span>: <span class="s2">"folder"</span>,
<span class="s2">"subfiles"</span>: <span class="o">[</span>
  <span class="o">{</span>
  <span class="s2">"mode"</span>:         640,
  <span class="s2">"filename"</span>:     <span class="s2">"folder/file1.txt"</span>,
  <span class="s2">"contenttype"</span>:  <span class="s2">"text/plain"</span>,
  <span class="s2">"offset"</span>:       0,
  <span class="s2">"len"</span>:          6
  <span class="o">}</span>
<span class="o">]</span>
<span class="o">}</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="p">{</span>
<span class="dl">"</span><span class="s2">mode</span><span class="dl">"</span><span class="p">:</span>     <span class="mi">640</span><span class="p">,</span>
<span class="dl">"</span><span class="s2">filename</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">folder</span><span class="dl">"</span><span class="p">,</span>
<span class="dl">"</span><span class="s2">subfiles</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span>
  <span class="p">{</span>
  <span class="dl">"</span><span class="s2">mode</span><span class="dl">"</span><span class="p">:</span>         <span class="mi">640</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">filename</span><span class="dl">"</span><span class="p">:</span>     <span class="dl">"</span><span class="s2">folder/file1.txt</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">contenttype</span><span class="dl">"</span><span class="p">:</span>  <span class="dl">"</span><span class="s2">text/plain</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">offset</span><span class="dl">"</span><span class="p">:</span>       <span class="mi">0</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">len</span><span class="dl">"</span><span class="p">:</span>          <span class="mi">6</span>
  <span class="p">}</span>
<span class="p">]</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
<span class="dl">"</span><span class="s2">mode</span><span class="dl">"</span><span class="p">:</span>     <span class="mi">640</span><span class="p">,</span>
<span class="dl">"</span><span class="s2">filename</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">folder</span><span class="dl">"</span><span class="p">,</span>
<span class="dl">"</span><span class="s2">subfiles</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span>
  <span class="p">{</span>
  <span class="dl">"</span><span class="s2">mode</span><span class="dl">"</span><span class="p">:</span>         <span class="mi">640</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">filename</span><span class="dl">"</span><span class="p">:</span>     <span class="dl">"</span><span class="s2">folder/file1.txt</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">contenttype</span><span class="dl">"</span><span class="p">:</span>  <span class="dl">"</span><span class="s2">text/plain</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">offset</span><span class="dl">"</span><span class="p">:</span>       <span class="mi">0</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">len</span><span class="dl">"</span><span class="p">:</span>          <span class="mi">6</span>
  <span class="p">}</span>
<span class="p">]</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="p">{</span>
<span class="s">"mode"</span><span class="p">:</span>     <span class="mi">640</span><span class="p">,</span>
<span class="s">"filename"</span><span class="p">:</span> <span class="s">"folder"</span><span class="p">,</span>
<span class="s">"subfiles"</span><span class="p">:</span> <span class="p">[</span>
  <span class="p">{</span>
  <span class="s">"mode"</span><span class="p">:</span>         <span class="mi">640</span><span class="p">,</span>
  <span class="s">"filename"</span><span class="p">:</span>     <span class="s">"folder/file1.txt"</span><span class="p">,</span>
  <span class="s">"contenttype"</span><span class="p">:</span>  <span class="s">"text/plain"</span><span class="p">,</span>
  <span class="s">"offset"</span><span class="p">:</span>       <span class="mi">0</span><span class="p">,</span>
  <span class="s">"len"</span><span class="p">:</span>          <span class="mi">6</span>
  <span class="p">}</span>
<span class="p">]</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="p">{</span>
<span class="s">"mode"</span><span class="o">:</span>     <span class="m">640</span><span class="p">,</span>
<span class="s">"filename"</span><span class="o">:</span> <span class="s">"folder"</span><span class="p">,</span>
<span class="s">"subfiles"</span><span class="o">:</span> <span class="p">[</span>
  <span class="p">{</span>
  <span class="s">"mode"</span><span class="o">:</span>         <span class="m">640</span><span class="p">,</span>
  <span class="s">"filename"</span><span class="o">:</span>     <span class="s">"folder/file1.txt"</span><span class="p">,</span>
  <span class="s">"contenttype"</span><span class="o">:</span>  <span class="s">"text/plain"</span><span class="p">,</span>
  <span class="s">"offset"</span><span class="o">:</span>       <span class="m">0</span><span class="p">,</span>
  <span class="s">"len"</span><span class="o">:</span>          <span class="m">6</span>
  <span class="p">}</span>
<span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<p>The response will contain some or all of these fields:</p>

<p>TODO</p>
<h2 id='downloading-with-decryption'>Downloading With Decryption</h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>TODO
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>skynet download <span class="o">[</span>skylink] <span class="o">[</span>destination] <span class="nt">--skykey-name</span> <span class="s2">"my-skykey"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">download</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">skynet-js</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// Assume we have a skylink e.g. from a previous upload.</span>

<span class="k">try</span> <span class="p">{</span>
  <span class="nx">download</span><span class="p">(</span><span class="nx">portalUrl</span><span class="p">,</span> <span class="nx">skylink</span><span class="p">,</span> <span class="p">{</span> <span class="na">skykeyName</span><span class="p">:</span> <span class="dl">"</span><span class="s2">my-skykey</span><span class="dl">"</span> <span class="p">});</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">skynet</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">@nebulous/skynet</span><span class="dl">'</span><span class="p">);</span>

<span class="c1">// Must have a 'skylink' from an earlier upload.</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">await</span> <span class="nx">skynet</span><span class="p">.</span><span class="nx">DownloadFile</span><span class="p">(</span>
        <span class="dl">"</span><span class="s2">./dst.jpg</span><span class="dl">"</span><span class="p">,</span>
        <span class="nx">skylink</span><span class="p">,</span>
        <span class="p">{</span> <span class="na">skykeyName</span><span class="p">:</span> <span class="dl">"</span><span class="s2">my-skykey</span><span class="dl">"</span> <span class="p">}</span>
    <span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Download successful</span><span class="dl">'</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">siaskynet</span> <span class="k">as</span> <span class="n">skynet</span>

<span class="c1"># Must have a 'skylink' from an earlier upload.
</span>
<span class="n">skynet</span><span class="o">.</span><span class="n">download_file</span><span class="p">(</span><span class="s">"./dst.jpg"</span><span class="p">,</span> <span class="n">skylink</span><span class="p">,</span> <span class="p">{</span> <span class="n">skykeyName</span><span class="p">:</span> <span class="s">"my-skykey"</span> <span class="p">})</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Download successful"</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="n">skynet</span> <span class="s">"github.com/NebulousLabs/go-skynet"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c">// Must have a 'skylink' from an earlier upload.</span>

    <span class="n">opts</span> <span class="o">:=</span> <span class="n">skynet</span><span class="o">.</span><span class="n">DefaultDownloadOptions</span>
    <span class="n">opts</span><span class="o">.</span><span class="n">SkykeyName</span> <span class="o">=</span> <span class="s">"my-skykey"</span>
    <span class="n">err</span> <span class="o">=</span> <span class="n">skynet</span><span class="o">.</span><span class="n">DownloadFile</span><span class="p">(</span><span class="s">"./dst.go"</span><span class="p">,</span> <span class="n">skylink</span><span class="p">,</span> <span class="n">opts</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="nb">panic</span><span class="p">(</span><span class="s">"Something went wrong, please try again.</span><span class="se">\n</span><span class="s">Error: "</span> <span class="o">+</span> <span class="n">err</span><span class="o">.</span><span class="n">Error</span><span class="p">())</span>
    <span class="p">}</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Download successful"</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<p>If you have a skykey on the portal you can ask the portal to decrypt the downloaded content for you. Simply pass the skykey name or ID in the custom options when downloading.</p>

<p>See the additional options in <a href=".#downloading-a-file">Downloading A File</a>.</p>

<p>Also see <a href=".#encryption">Encryption</a>.</p>
<h1 id='encryption'>Encryption</h1><h2 id='creating-a-skykey'>Creating A Skykey</h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nt">-A</span> <span class="s2">"Sia-Agent"</span>  <span class="nt">-u</span> <span class="s2">""</span>:&lt;apipassword&gt; <span class="nt">--data</span> <span class="s2">"name=key_to_the_castle"</span> <span class="s2">"localhost:9980/skynet/createskykey"</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>TODO
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">createSkykey</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">skynet-js</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">name</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">testcreateskykey</span><span class="dl">"</span><span class="p">;</span>

<span class="k">try</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">skykey</span> <span class="o">=</span> <span class="nx">createSkykey</span><span class="p">(</span><span class="nx">portalUrl</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="dl">"</span><span class="s2">private-id</span><span class="dl">"</span><span class="p">);</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="nx">TODO</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="n">TODO</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="n">skynet</span> <span class="s">"github.com/NebulousLabs/go-skynet"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">const</span> <span class="n">name</span> <span class="o">=</span> <span class="s">"testcreateskykey"</span>

    <span class="n">fmt</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="s">"Creating skykey with name %v...</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
    <span class="n">skykey</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">skynet</span><span class="o">.</span><span class="n">CreateSkykey</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s">"private-id"</span><span class="p">,</span> <span class="n">skynet</span><span class="o">.</span><span class="n">DefaultCreateSkykeyOptions</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="nb">panic</span><span class="p">(</span><span class="s">"Unable to create skykey: "</span> <span class="o">+</span> <span class="n">err</span><span class="o">.</span><span class="n">Error</span><span class="p">())</span>
    <span class="p">}</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="s">"Created skykey %v</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">skykey</span><span class="p">)</span>
</code></pre></div>
<p>This function creates a skykey stored under the given name.</p>
<h3 id='settings'>Settings</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>name</code></td>
<td>Desired name of the skykey.</td>
</tr>
<tr>
<td><code>id</code></td>
<td>Desired type of the skykey. The two supported types are &quot;public-id&quot; and</td>
</tr>
</tbody></table>

<p>&quot;private-id&quot;. Users should use &quot;private-id&quot; skykeys unless they have a specific
reason to use &quot;public-id&quot; skykeys which reveal skykey IDs and show which
skyfiles are encrypted with the same skykey.</p>
<h3 id='response'>Response</h3><div class="highlight"><pre class="highlight shell tab-shell--curl"><code><span class="o">{</span>
  <span class="s2">"skykey"</span>: <span class="s2">"skykey:AUI0eAOXWXHwW6KOLyI5O1OYduVvHxAA8qUR_fJ8Kluasb-ykPlHBEjDczrL21hmjhH0zAoQ3-Qq?name=testskykey1"</span>,
  <span class="s2">"name"</span>: <span class="s2">"key_to_the_castle"</span>,
  <span class="s2">"id"</span>: <span class="s2">"ai5z8cf5NWbcvPBaBn0DFQ=="</span>,
  <span class="s2">"type"</span>: <span class="s2">"private-id"</span>
<span class="o">}</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>TODO
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="p">{</span>
  <span class="dl">"</span><span class="s2">skykey</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">skykey:AUI0eAOXWXHwW6KOLyI5O1OYduVvHxAA8qUR_fJ8Kluasb-ykPlHBEjDczrL21hmjhH0zAoQ3-Qq?name=testskykey1</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">key_to_the_castle</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">ai5z8cf5NWbcvPBaBn0DFQ==</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">private-id</span><span class="dl">"</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
  <span class="dl">"</span><span class="s2">skykey</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">skykey:AUI0eAOXWXHwW6KOLyI5O1OYduVvHxAA8qUR_fJ8Kluasb-ykPlHBEjDczrL21hmjhH0zAoQ3-Qq?name=testskykey1</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">key_to_the_castle</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">ai5z8cf5NWbcvPBaBn0DFQ==</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">private-id</span><span class="dl">"</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="p">{</span>
  <span class="s">"skykey"</span><span class="p">:</span> <span class="s">"skykey:AUI0eAOXWXHwW6KOLyI5O1OYduVvHxAA8qUR_fJ8Kluasb-ykPlHBEjDczrL21hmjhH0zAoQ3-Qq?name=testskykey1"</span><span class="p">,</span>
  <span class="s">"name"</span><span class="p">:</span> <span class="s">"key_to_the_castle"</span><span class="p">,</span>
  <span class="s">"id"</span><span class="p">:</span> <span class="s">"ai5z8cf5NWbcvPBaBn0DFQ=="</span><span class="p">,</span>
  <span class="s">"type"</span><span class="p">:</span> <span class="s">"private-id"</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="p">{</span>
  <span class="s">"skykey"</span><span class="o">:</span> <span class="s">"skykey:AUI0eAOXWXHwW6KOLyI5O1OYduVvHxAA8qUR_fJ8Kluasb-ykPlHBEjDczrL21hmjhH0zAoQ3-Qq?name=testskykey1"</span><span class="p">,</span>
  <span class="s">"name"</span><span class="o">:</span> <span class="s">"key_to_the_castle"</span><span class="p">,</span>
  <span class="s">"id"</span><span class="o">:</span> <span class="s">"ai5z8cf5NWbcvPBaBn0DFQ=="</span><span class="p">,</span>
  <span class="s">"type"</span><span class="o">:</span> <span class="s">"private-id"</span>
<span class="p">}</span>
</code></pre></div>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>skykey</code></td>
<td>string</td>
<td>Base-64 encoded Skykey</td>
</tr>
<tr>
<td><code>name</code></td>
<td>string</td>
<td>Name of the Skykey</td>
</tr>
<tr>
<td><code>id</code></td>
<td>string</td>
<td>ID of the Skykey</td>
</tr>
<tr>
<td><code>type</code></td>
<td>string</td>
<td>Desired type of the skykey. See above for more information.</td>
</tr>
</tbody></table>
<h2 id='addding-a-skykey'>Addding A Skykey</h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nt">-A</span> <span class="s2">"Sia-Agent"</span>  <span class="nt">-u</span> <span class="s2">""</span>:&lt;apipassword&gt; <span class="nt">--data</span> <span class="s2">"skykey=BAAAAAAAAABrZXkxAAAAAAAAAAQgAAAAAAAAADiObVg49-0juJ8udAx4qMW-TEHgDxfjA0fjJSNBuJ4a"</span> <span class="s2">"localhost:9980/skynet/addskykey"</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>TODO
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">addSkykey</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">skynet-js</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">skykey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">skykey:AUI0eAOXWXHwW6KOLyI5O1OYduVvHxAA8qUR_fJ8Kluasb-ykPlHBEjDczrL21hmjhH0zAoQ3-Qq</span><span class="dl">"</span><span class="p">;</span>

<span class="k">try</span> <span class="p">{</span>
  <span class="nx">addSkykey</span><span class="p">(</span><span class="nx">portalUrl</span><span class="p">,</span> <span class="nx">skykey</span><span class="p">);</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="nx">TODO</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="n">TODO</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="n">skynet</span> <span class="s">"github.com/NebulousLabs/go-skynet"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">const</span> <span class="n">skykey</span> <span class="o">=</span> <span class="s">"skykey:AUI0eAOXWXHwW6KOLyI5O1OYduVvHxAA8qUR_fJ8Kluasb-ykPlHBEjDczrL21hmjhH0zAoQ3-Qq"</span>

    <span class="n">fmt</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="s">"Adding skykey %v...</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">skykey</span><span class="p">)</span>
    <span class="n">err</span> <span class="o">:=</span> <span class="n">skynet</span><span class="o">.</span><span class="n">AddSkykey</span><span class="p">(</span><span class="n">skykey</span><span class="p">,</span> <span class="n">skynet</span><span class="o">.</span><span class="n">DefaultAddSkykeyOptions</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="nb">panic</span><span class="p">(</span><span class="s">"Unable to add skykey: "</span> <span class="o">+</span> <span class="n">err</span><span class="o">.</span><span class="n">Error</span><span class="p">())</span>
    <span class="p">}</span>
</code></pre></div>
<p>This function stores the given skykey with the renter&#39;s skykey manager.</p>
<h3 id='settings-2'>Settings</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>skykey</code></td>
<td>Base-64 encoded skykey</td>
</tr>
</tbody></table>
<h3 id='response-2'>Response</h3>
<p>Error or exception on failure.</p>
<h2 id='getting-a-skykey-by-name'>Getting A Skykey By Name</h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nt">-A</span> <span class="s2">"Sia-Agent"</span>  <span class="nt">-u</span> <span class="s2">""</span>:&lt;apipassword&gt; <span class="nt">--data</span> <span class="s2">"name=key_to_the_castle"</span> <span class="s2">"localhost:9980/skynet/skykey"</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>TODO
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">getSkykeyByName</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">skynet-js</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// Assume we have a skykey name.</span>

<span class="k">try</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">skykey</span> <span class="o">=</span> <span class="nx">getSkykeyByName</span><span class="p">(</span><span class="nx">portalUrl</span><span class="p">,</span> <span class="nx">name</span><span class="p">);</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="nx">TODO</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="n">TODO</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="n">skynet</span> <span class="s">"github.com/NebulousLabs/go-skynet"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">const</span> <span class="n">name</span> <span class="o">=</span> <span class="s">"testcreateskykey"</span>

    <span class="n">fmt</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="s">"Getting skykey with name %v...</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
    <span class="n">skykey</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">skynet</span><span class="o">.</span><span class="n">GetSkykeyByName</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">skynet</span><span class="o">.</span><span class="n">DefaultGetSkykeyOptions</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="nb">panic</span><span class="p">(</span><span class="s">"Unable to get skykey: "</span> <span class="o">+</span> <span class="n">err</span><span class="o">.</span><span class="n">Error</span><span class="p">())</span>
    <span class="p">}</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="s">"Skykey: %#v</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">skykey</span><span class="p">)</span>
</code></pre></div>
<p>This function returns the base-64 encoded skykey stored under that name.</p>
<h3 id='settings-3'>Settings</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>name</code></td>
<td>Name of the skykey being queried.</td>
</tr>
</tbody></table>
<h3 id='response-3'>Response</h3>
<p>See <a href=".#create-skykey">Create Skykey</a>.</p>
<h3 id='getting-a-skykey-by-id'>Getting A Skykey By ID</h3><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nt">-A</span> <span class="s2">"Sia-Agent"</span>  <span class="nt">-u</span> <span class="s2">""</span>:&lt;apipassword&gt; <span class="nt">--data</span> <span class="s2">"id=gi5z8cf5NWbcvPBaBn0DFQ=="</span> <span class="s2">"localhost:9980/skynet/skykey"</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>TODO
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">getSkykeyById</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">skynet-js</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// Assume we have a skykey ID.</span>

<span class="k">try</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">skykey</span> <span class="o">=</span> <span class="nx">getSkykeyById</span><span class="p">(</span><span class="nx">portalUrl</span><span class="p">,</span> <span class="nx">id</span><span class="p">);</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="nx">TODO</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="n">TODO</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="n">skynet</span> <span class="s">"github.com/NebulousLabs/go-skynet"</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">const</span> <span class="n">id</span> <span class="o">=</span> <span class="s">"pJAPPfWkWXpss3BvMDCJCw=="</span>

    <span class="n">fmt</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="s">"Getting skykey with id %v...</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">id</span><span class="p">)</span>
    <span class="n">skykey</span><span class="p">,</span> <span class="n">err</span> <span class="o">=</span> <span class="n">skynet</span><span class="o">.</span><span class="n">GetSkykeyByID</span><span class="p">(</span><span class="n">id</span><span class="p">,</span> <span class="n">skynet</span><span class="o">.</span><span class="n">DefaultGetSkykeyOptions</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="nb">panic</span><span class="p">(</span><span class="s">"Unable to get skykey: "</span> <span class="o">+</span> <span class="n">err</span><span class="o">.</span><span class="n">Error</span><span class="p">())</span>
    <span class="p">}</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="s">"Skykey: %#v</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">skykey</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<blockquote>
<p>TODO</p>
</blockquote>

<p>This function returns the base-64 encoded skykey stored under that ID.</p>
<h3 id='settings-4'>Settings</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>id</code></td>
<td>ID of the skykey being queried</td>
</tr>
</tbody></table>
<h3 id='response-4'>Response</h3>
<p>See <a href=".#create-skykey">Create Skykey</a>.</p>
<h2 id='listing-skykeys'>Listing Skykeys</h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>TODO
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>TODO
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">getSkykeys</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">skynet-js</span><span class="dl">"</span><span class="p">;</span>

<span class="k">try</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">skykeys</span> <span class="o">=</span> <span class="nx">getSkykeys</span><span class="p">(</span><span class="nx">portalUrl</span><span class="p">);</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="nx">TODO</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="n">TODO</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="n">skynet</span> <span class="s">"github.com/NebulousLabs/go-skynet"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Listing skykeys..."</span><span class="p">)</span>
    <span class="n">skykeys</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">skynet</span><span class="o">.</span><span class="n">ListSkykeys</span><span class="p">(</span><span class="n">skynet</span><span class="o">.</span><span class="n">DefaultListSkykeysOptions</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="nb">panic</span><span class="p">(</span><span class="s">"Unable to get skykeys: "</span> <span class="o">+</span> <span class="n">err</span><span class="o">.</span><span class="n">Error</span><span class="p">())</span>
    <span class="p">}</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="s">"Skykeys: %v</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">skykeys</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<p>This function lists all skykeys on the given portal.</p>
<h3 id='settings-5'>Settings</h3>
<p>None</p>
<h3 id='response-5'>Response</h3>
<p>List of Skykeys (see <a href=".#create-skykey">Create Skykey</a>.</p>
<h1 id='blacklist'>Blacklist</h1><h2 id='get-blacklist'>Get Blacklist</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-A</span> <span class="s2">"Sia-Agent"</span> <span class="s2">"localhost:9980/skynet/blacklist"</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"blacklist"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"QAf9Q7dBSbMarLvyeE6HTQmwhr7RX9VMrP9xIMzpU3I"</span><span class="w">
    </span><span class="s2">"QAf9Q7dBSbMarLvyeE6HTQmwhr7RX9VMrP9xIMzpU3I"</span><span class="w">
    </span><span class="s2">"QAf9Q7dBSbMarLvyeE6HTQmwhr7RX9VMrP9xIMzpU3I"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This endpoint returns the list of merkleroots that are blacklisted.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>GET /skynet/blacklist</code></p>
<h3 id='response-fields'>Response Fields</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>blacklist</td>
<td>object</td>
<td>The blacklist is a list of merkle roots, which are hashes, that are blacklisted.</td>
</tr>
</tbody></table>
<h2 id='edit-blacklist'>Edit Blacklist</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>// add skylink
curl <span class="nt">-A</span> <span class="s2">"Sia-Agent"</span> <span class="nt">--user</span> <span class="s2">""</span>:&lt;apipassword&gt; <span class="nt">--data</span> <span class="s1">'{"add" : ["GAC38Gan6YHVpLl-bfefa7aY85fn4C0EEOt5KJ6SPmEy4g","GAC38Gan6YHVpLl-bfefa7aY85fn4C0EEOt5KJ6SPmEy4g","GAC38Gan6YHVpLl-bfefa7aY85fn4C0EEOt5KJ6SPmEy4g"]}'</span> <span class="s2">"localhost:9980/skynet/blacklist"</span>

// remove skylink
curl <span class="nt">-A</span> <span class="s2">"Sia-Agent"</span> <span class="nt">--user</span> <span class="s2">""</span>:&lt;apipassword&gt; <span class="nt">--data</span> <span class="s1">'{"remove" : ["GAC38Gan6YHVpLl-bfefa7aY85fn4C0EEOt5KJ6SPmEy4g","GAC38Gan6YHVpLl-bfefa7aY85fn4C0EEOt5KJ6SPmEy4g","GAC38Gan6YHVpLl-bfefa7aY85fn4C0EEOt5KJ6SPmEy4g"]}'</span> <span class="s2">"localhost:9980/skynet/blacklist"</span>
</code></pre></div>
<p>This endpoint allows to update the list of skylinks that should be blacklisted
from Skynet. It can be used to both add and remove skylinks from the blacklist.</p>
<h3 id='http-request-2'>HTTP Request</h3>
<p><code>POST /skynet/blacklist</code></p>
<h3 id='request-body-fields'>Request Body Fields</h3>
<aside class="warning">At least one of the following fields needs to be non empty</aside>

<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>add</td>
<td>array of strings</td>
<td>add is an array of skylinks that should be added to the blacklist.</td>
</tr>
<tr>
<td>remove</td>
<td>array of strings</td>
<td>remove is an array of skylinks that should be removed from the blacklist.</td>
</tr>
</tbody></table>
<h3 id='response-fields-2'>Response Fields</h3>
<p>standard success or error response. See <a href="#standard-responses">standard
responses</a>.</p>
<h1 id='portals'>Portals</h1><h2 id='get-portals'>Get Portals</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-A</span> <span class="s2">"Sia-Agent"</span> <span class="s2">"localhost:9980/skynet/portals"</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"portals"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"siasky.net:443"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"public"</span><span class="p">:</span><span class="w">  </span><span class="kc">true</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This endpoint returns the list of known Skynet portals.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>GET /skynet/portals</code></p>
<h3 id='response-fields'>Response Fields</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>address</td>
<td>string</td>
<td>The IP or domain name and the port of the portal. Must be a valid network address.</td>
</tr>
<tr>
<td>public</td>
<td>bool</td>
<td>Indicates whether the portal can be accessed publicly or not.</td>
</tr>
</tbody></table>
<h2 id='edit-portals'>Edit Portals</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>// add portal
curl <span class="nt">-A</span> <span class="s2">"Sia-Agent"</span> <span class="nt">--user</span> <span class="s2">""</span>:&lt;apipassword&gt; <span class="nt">--data</span> <span class="s1">'{"add" : [{"address":"siasky.net:443","public":true}]}'</span> <span class="s2">"localhost:9980/skynet/portals"</span>

// remove portal
curl <span class="nt">-A</span> <span class="s2">"Sia-Agent"</span> <span class="nt">--user</span> <span class="s2">""</span>:&lt;apipassword&gt; <span class="nt">--data</span> <span class="s1">'{"remove" : ["siasky.net:443"]}'</span> <span class="s2">"localhost:9980/skynet/portals"</span>
</code></pre></div>
<p>This endpoint allows to update the list of known Skynet portals. It can be used
to both add and remove portals from the list.</p>
<h3 id='http-request-2'>HTTP Request</h3>
<p><code>POST /skynet/portals</code></p>
<h3 id='request-body-fields'>Request Body Fields</h3>
<aside class="warning">At least one of the following fields needs to be non empty</aside>

<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>add</td>
<td>array of SkynetPortal</td>
<td>add is an array of portal info that should be added to the list of portals.</td>
</tr>
<tr>
<td>remove</td>
<td>array of strings</td>
<td>remove is an array of portal network addresses that should be removed from the</td>
</tr>
</tbody></table>

<p>list of portals.</p>
<h3 id='response-fields-2'>Response Fields</h3>
<p>standard success or error response. See <a href="#standard-responses">standard
responses</a>.</p>
<h1 id='statistics'>Statistics</h1><h2 id='get-stats'>Get Stats</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-A</span> <span class="s2">"Sia-Agent"</span> <span class="s2">"localhost:9980/skynet/stats"</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"uploadstats"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"numfiles"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nl">"totalsize"</span><span class="p">:</span><span class="w"> </span><span class="mi">44527895</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"versioninfo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"version"</span><span class="p">:</span><span class="w">     </span><span class="s2">"1.4.4-master"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"gitrevision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cd5a83712"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"performancestats"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This endpoint returns statistical information about Skynet, e.g. number of files uploaded</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>GET /skynet/stats</code></p>
<h3 id='response-fields'>Response Fields</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>uploadstats</td>
<td>object</td>
<td>Uploadstats is an object with statistics about the data uploaded to Skynet.</td>
</tr>
<tr>
<td>numfiles</td>
<td>int</td>
<td>Numfiles is the total number of files uploaded to Skynet.</td>
</tr>
<tr>
<td>totalsize</td>
<td>int</td>
<td>Totalsize is the total amount of data in bytes uploaded to Skynet.</td>
</tr>
<tr>
<td>versioninfo</td>
<td>object</td>
<td>Versioninfo is an object that contains the node&#39;s version information.</td>
</tr>
<tr>
<td>version</td>
<td>string</td>
<td>Version is the siad version the node is running.</td>
</tr>
<tr>
<td>gitrevision</td>
<td>string</td>
<td>Gitrevision refers to the commit hash used to build said.</td>
</tr>
<tr>
<td>performancestats</td>
<td>object</td>
<td>PerformanceStats is an object that contains a breakdown of performance metrics for the skynet endpoints. Things are broken down into containers based on the type of action performed. For example, there is a container for downloads less than 64kb in size. <br><br>Within each container, there is a bucket of half lives. Every time a data point is added to a container, it is put in to every bucket, counting up the total number of requests. The buckets decay at the stated half life, which means they give a good representation of how much activity there has been over twice their halflife. So for the one minute bucket, the total number of datapoints in the bucket is a good representation of how many things have happened in the past two minutes.<br><br>Within each bucket, there are several fields. For example, the n60ms field represents the number of requests that finished in under 60ms. There is an NErr field which gets incremented if there is a failure that can be attributed to siad.<br><br>Every download request will go into the TimeToFirstByte container, as well as the appropriate download container based on the size of the download. Within the chosen containers, every bucket will have the same field incremented. The field that gets incremented is the one that corresponds to the amount of time the request took.<br><br>The performance stats fields are not protected by a compatibility promise, and may change over time.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell--curl">curl</a>
                <a href="#" data-language-name="shell--cli">CLI</a>
                <a href="#" data-language-name="javascript--browser">Browser JS</a>
                <a href="#" data-language-name="javascript--node">NodeJS</a>
                <a href="#" data-language-name="python">Python</a>
                <a href="#" data-language-name="go">Go</a>
          </div>
      </div>
    </div>
  </body>
</html>
